gke_cluster_name=cluster-2,location=us-central1-a,project_id=mytestproject-371511

gke/monitoring-configuration: Verifies that GKE Monitoring and its components are correctly configured and operational.

  This runbook guides through a systematic investigation of potential
  causes when monitoring from the Google Kubernetes Engine (GKE) cluster are missing
  or incomplete. The focus is on core configuration settings that are essential
  for proper monitoring functionality.

  The following areas are examined:

  - **Project-Level Monitoring:** Ensures that the Google Cloud project housing
  the GKE cluster has the Cloud Monitoring API enabled.

  - **Cluster-Level Monitoring:** Verifies that monitoring is explicitly enabled
  within the GKE cluster's configuration.

  - **Node Pool Permissions:** Confirms that the nodes within the cluster's
  node pools have the 'Cloud Monitoring Write' scope enabled, allowing them to send
  metrics data.

  - **Service Account Permissions:** Validates that the service account used
  by the node pools possesses the necessary IAM permissions to interact with
  Cloud Monitoring. Specifically, the "roles/monitoring.metricWriter" role is typically
  required.

  
[START]: Checks the provided parameters.
[AUTOMATED STEP]: Verify if the API is enabled for this project.
[AUTOMATED STEP]: Checks if GKE level Monitoring is disabled.
[AUTOMATED STEP]: Verify node-pool OAuth scopes include one of the required scopes.
[AUTOMATED STEP]: Verifies the node pool's service account has a role with the correct required service IAM permissions.
[END]: Finalizes `GKE Monitoring` diagnostics.


